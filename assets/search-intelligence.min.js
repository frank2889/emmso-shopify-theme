class SearchIntelligence{constructor(){this.synonyms={laminate:["laminaat","laminat","laminated flooring","laminate floor","stratifié"],vinyl:["pvc","luxury vinyl","lvt","vinyl plank","vinyl planks","vinyle"],parquet:["parket","parkett","hardwood","wood flooring","houten vloer"],wood:["wooden","timber","hout","holz","bois","legno","madera"],tile:["tiles","tegel","tegels","fliese","fliesen","carrelage","piastrelle","azulejo"],stone:["steen","stein","natural stone","marble","granite","pierre","pietra","piedra"],cleaner:["cleaning","clean","reiniger","reinigung","schoonmaakmiddel","schoonmaak","nettoyant","detergente","limpiador"],sealer:["sealing","seal","verzegeling","versiegelung","scellant","sigillante","sellador","protection"],oil:["olie","öl","wood oil","floor oil","huile","olio","aceite"],wax:["was","wachs","floor wax","cire","cera"],polish:["polisher","polijsten","polieren","polir","lucidare","pulir"],adhesive:["glue","lijm","kleber","colle","colla","pegamento","bonding"],underlay:["underlayment","ondervloer","unterlage","sous-couche","sottofondi"],varnish:["vernis","lak","lack","vernice","barniz"],waterproof:["water resistant","waterdicht","wasserdicht","water proof","étanche","impermeabile","impermeable"],"scratch resistant":["scratch proof","krasbestendig","kratzfest","résistant aux rayures","antigraffio","resistente a los arañazos"],"easy to install":["diy","click system","gemakkelijk te leggen","einfach zu verlegen","facile à poser","facile da installare","fácil de instalar"],durable:["strong","heavy duty","duurzaam","langlebig","robust","durable","durevole","duradero"],"eco friendly":["ecological","sustainable","milieuvriendelijk","umweltfreundlich","écologique","ecologico","ecológico"],bona:["bona floor care","bona products","bona vloeronderhoud"],woca:["woca denmark","woca oil","woca olie"],lithofin:["lithofin stone care","lithofin natuursteen"],hmk:["hmk moeller","hmk stone care"],loba:["loba wakol","loba vloeren"],"quick-step":["quick step","quickstep"],"blue dolphin":["bluedolphin","blue dolfijn"],oak:["eik","eiche","oak wood","chêne","quercia","roble"],walnut:["noot","walnuss","walnut wood","noyer","noce","nogal"],white:["wit","weiss","whitewashed","blanc","bianco","blanco"],grey:["gray","grijs","grau","gris","grigio"],brown:["bruin","braun","brun","marrone","marrón"],black:["zwart","schwarz","noir","nero","negro"],natural:["naturel","natur","natural finish","naturale","natural"],matt:["matte","mat","matt finish"],gloss:["glossy","high gloss","glanzend","glänzend","brillant","lucido","brillante"],beige:["beige","crème","crema"],kitchen:["keuken","küche","cuisine","cucina","cocina"],bathroom:["badkamer","bad","salle de bain","bagno","baño","douche","wc"],"living room":["woonkamer","salon","wohnzimmer","soggiorno","sala de estar"],bedroom:["slaapkamer","schlafzimmer","chambre","camera da letto","dormitorio"],hallway:["gang","hal","flur","couloir","corridoio","pasillo","entree"],install:["installation","leggen","verlegen","installeren","poser","installare","instalar"],maintain:["maintenance","onderhoud","onderhouden","pflege","pflegen","entretien","manutenzione","mantenimiento"],clean:["cleaning","schoonmaken","reinigen","nettoyer","pulire","limpiar"],protect:["protection","beschermen","schützen","protéger","proteggere","proteger"],restore:["restoration","herstellen","wiederherstellen","restaurer","restaurare","restaurar"]},this.questionPatterns={how:/^(how|hoe|wie)\s+(to|can|do|te)\s+/i,what:/^(what|wat|welke|welches?)\s+/i,which:/^(which|welke|welches?)\s+/i,where:/^(where|waar|wo)\s+/i,when:/^(when|wanneer|wann)\s+/i,why:/^(why|waarom|warum)\s+/i,best:/\b(best|beste|besten?)\b/i,cheap:/\b(cheap|goedkoop|billig|affordable|budget)\b/i,recommend:/\b(recommend|aanbevelen|empfehlen|suggestion)\b/i},this.problemKeywords=["remove","fix","repair","clean","maintain","protect","prevent","verwijder","herstel","repareer","schoon","onderhoud","bescherm","entfernen","reparieren","reinigen","pflegen","schützen","stain","scratch","damage","crack","squeak","water damage","vlek","kras","schade","barst","piepen","waterschade"],this.roomTypes={kitchen:["keuken","küche","cuisine","cucina"],bathroom:["badkamer","bad","salle de bain","bagno"],living:["woonkamer","wohnzimmer","salon","soggiorno","living room"],bedroom:["slaapkamer","schlafzimmer","chambre","camera da letto"],hallway:["gang","flur","couloir","corridoio","entrance"],outdoor:["buiten","außen","extérieur","esterno","terrace","balcony"]},this.usageCharacteristics={"pet-friendly":["pet safe","huisdier","haustier","animal","dog","cat"],"underfloor heating":["vloerverwarming","fußbodenheizung","chauffage sol","ufh"],"high traffic":["commercial","heavy duty","zwaar gebruik","stark beansprucht"],"moisture resistant":["waterproof","water resistant","vochtbestendig","feuchtigkeitsbeständig"]}}analyzeQuery(e){return{original:e,normalized:this.normalizeQuery(e),intent:this.detectIntent(e),synonyms:this.expandSynonyms(e),room:this.detectRoom(e),characteristics:this.detectCharacteristics(e),isQuestion:this.isQuestion(e),isProblem:this.isProblem(e),brands:this.detectBrands(e),colors:this.detectColors(e),priceRange:this.extractPriceRange(e)}}normalizeQuery(e){return e.toLowerCase().trim().replace(/[^\w\s€$-]/g," ").replace(/\s+/g," ")}detectIntent(e){const r=this.normalizeQuery(e);for(const[e,o]of Object.entries(this.questionPatterns))if(o.test(r))return e;return this.isProblem(r)?"problem-solving":/\bvs\b|\bversus\b|\bor\b|\bof\b/.test(r)?"comparison":/\bbuy\b|\bkoop\b|\bkaufen\b|\bpurchase\b/.test(r)?"purchase":"search"}isQuestion(e){return Object.values(this.questionPatterns).some(r=>r.test(e))||e.includes("?")}isProblem(e){const r=this.normalizeQuery(e);return this.problemKeywords.some(e=>r.includes(e))}expandSynonyms(e){const r=this.normalizeQuery(e),o=new Set([r]);for(const[e,t]of Object.entries(this.synonyms))(r.includes(e)||t.some(e=>r.includes(e)))&&(o.add(e),t.forEach(e=>o.add(e)));return Array.from(o)}detectRoom(e){const r=this.normalizeQuery(e);for(const[e,o]of Object.entries(this.roomTypes))if(o.some(e=>r.includes(e))||r.includes(e))return e;return null}detectCharacteristics(e){const r=this.normalizeQuery(e),o=[];for(const[e,t]of Object.entries(this.usageCharacteristics))(t.some(e=>r.includes(e))||r.includes(e))&&o.push(e);return o}detectBrands(e){const r=this.normalizeQuery(e);return["lithofin","hmk","lecol","woca","bona","loba","floorservice","blue dolphin","dr. schutz","blanchon","quick-step","pergo","berry alloc","parador","haro","osmo","treatex","rubio monocoat","pallmann"].filter(e=>r.includes(e))}detectColors(e){const r=this.normalizeQuery(e),o=[],t={oak:["eik","eiche"],walnut:["noot","walnuss"],white:["wit","weiss"],grey:["grijs","grau","gray"],brown:["bruin","braun"],black:["zwart","schwarz"],natural:["naturel","natur"]};for(const[e,a]of Object.entries(t))(r.includes(e)||a.some(e=>r.includes(e)))&&o.push(e);return o}extractPriceRange(e){const r=[/(?:under|below|less than|max|maximum)\s*€?\s*(\d+)/i,/€?\s*(\d+)\s*(?:to|-|tot)\s*€?\s*(\d+)/i,/(?:over|above|more than|min|minimum)\s*€?\s*(\d+)/i];for(const o of r){const r=e.match(o);if(r){if(o.source.includes("under|below"))return{max:parseInt(r[1])};if(o.source.includes("to|-|tot"))return{min:parseInt(r[1]),max:parseInt(r[2])};if(o.source.includes("over|above"))return{min:parseInt(r[1])}}}return null}rankResults(e,r,o){return e.map(e=>{let t=0;e.title.toLowerCase().includes(r.toLowerCase())&&(t+=100),o.synonyms.some(r=>e.title.toLowerCase().includes(r.toLowerCase()))&&(t+=80),o.brands.length>0&&o.brands.some(r=>e.vendor?.toLowerCase().includes(r.toLowerCase()))&&(t+=60);const a=e.tags||[];if(o.characteristics.some(e=>a.some(r=>r.toLowerCase().includes(e.toLowerCase())))&&(t+=50),o.room&&a.some(e=>e.toLowerCase().includes(o.room))&&(t+=40),o.priceRange){const r=e.price/100;(!o.priceRange.min||r>=o.priceRange.min)&&(!o.priceRange.max||r<=o.priceRange.max)&&(t+=30)}return e.available&&(t+=20),a.some(e=>"new"===e.toLowerCase())&&(t+=10),{...e,relevanceScore:t}}).sort((e,r)=>r.relevanceScore-e.relevanceScore)}generateSmartSuggestions(e,r){const o=[];return r.isQuestion&&o.push({type:"info",text:"Looking for how-to guides? Check our learning center",action:"/pages/learning-center"}),r.isProblem&&o.push({type:"category",text:"Browse all floor care products",action:"/collections/floor-care"}),r.room&&o.push({type:"category",text:`See all ${r.room} flooring options`,action:`/collections/${r.room}-flooring`}),r.brands.length>0&&r.brands.forEach(e=>{o.push({type:"brand",text:`View all ${e} products`,action:`/collections/vendor-${e.toLowerCase().replace(/\s+/g,"-")}`})}),o}getQueryVariations(e){const r=this.analyzeQuery(e),o=new Set([e,r.normalized]);r.synonyms.forEach(r=>{r!==e&&r.length>=2&&o.add(r)});const t=e.replace(/€?\s*\d+(?:\s*(?:to|-|tot)\s*€?\s*\d+)?/gi,"").trim();return t!==e&&t.length>=2&&o.add(t),r.brands.length>0&&r.brands.forEach(e=>o.add(e)),r.colors.length>0&&r.colors.forEach(e=>o.add(e)),r.room&&(o.add(r.room),o.add(`${r.room} flooring`)),Array.from(o).filter(e=>e.length>=2)}getRelatedProductsQuery(e,r="en"){const o=[];if(e.product_type){o.push(e.product_type);const r=e.product_type.toLowerCase();this.synonyms[r]&&o.push(...this.synonyms[r])}e.vendor&&o.push(e.vendor),e.tags&&e.tags.forEach(e=>{const r=e.toLowerCase();for(const[e,t]of Object.entries(this.usageCharacteristics))(t.some(e=>r.includes(e))||r.includes(e))&&o.push(e)});return e.title.toLowerCase().split(/\s+/).forEach(e=>{for(const[r,t]of Object.entries(this.getColorMap()))(e===r||t.some(r=>e.includes(r)))&&o.push(r)}),o.filter((e,r,o)=>o.indexOf(e)===r).slice(0,3)}getColorMap(){return{oak:["eik","eiche","chêne"],walnut:["noot","walnuss","noyer"],white:["wit","weiss","blanc","bianco"],grey:["grijs","grau","gris","grigio","gray"],brown:["bruin","braun","brun","marrone"],black:["zwart","schwarz","noir","nero"],natural:["naturel","natur","naturale"],beige:["beige"],red:["rood","rot","rouge","rosso"]}}detectLanguage(){const e=document.documentElement.lang;if(e)return e.split("-")[0].toLowerCase();const r=window.location.pathname.match(/^\/([a-z]{2})\//);return r?r[1].toLowerCase():window.Shopify?.locale?window.Shopify.locale.split("-")[0].toLowerCase():"en"}getLocalizedPlaceholder(){const e={nl:"Zoek naar producten, merken of categorieën...",de:"Suchen Sie nach Produkten, Marken oder Kategorien...",fr:"Rechercher des produits, marques ou catégories...",es:"Buscar productos, marcas o categorías...",it:"Cerca prodotti, marchi o categorie...",pt:"Pesquisar produtos, marcas ou categorias...",da:"Søg efter produkter, mærker eller kategorier...",en:"Search for products, brands, or categories..."};return e[this.detectLanguage()]||e.en}}window.SearchIntelligence=SearchIntelligence;