!function(){"use strict";const e=window.location.search.includes("debug=true")||"true"===localStorage.getItem("emmso_debug");function t(t,o){e&&console.log(`[EMMSO Search Hero] ${t}`,o||"")}function o(){try{localStorage.removeItem("recentSearches"),localStorage.removeItem("recent_searches"),localStorage.removeItem("searchHistory"),localStorage.removeItem("search_history"),t("Aggressively cleared all search history"),setTimeout(()=>{const e=document.querySelector("[data-recent-searches]");e&&(e.setAttribute("hidden",""),e.style.display="none");document.querySelectorAll(".search-suggestions__recent").forEach(e=>{e.setAttribute("hidden",""),e.style.display="none"})},100)}catch(e){console.error("[EMMSO] Error clearing old searches:",e)}}function c(){const e=document.querySelector(".search-hero"),o=document.querySelectorAll(".category-pill"),c=document.querySelector(".search-input"),r=document.querySelectorAll(".search-suggestion-chip");e&&(e.setAttribute("data-cro-element","search-hero"),t("CRO tracking initialized on hero section")),o.forEach((e,t)=>{e.setAttribute("data-cro-element","category-pill"),e.setAttribute("data-cro-category",e.getAttribute("data-category")),e.setAttribute("data-cro-index",t)}),c&&c.setAttribute("data-cro-element","search-input"),r.forEach((e,t)=>{e.setAttribute("data-cro-element","trending-chip"),e.setAttribute("data-cro-index",t)}),t(`CRO tracking: ${o.length} category pills, ${r.length} trending chips`)}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){o(),c()}):(o(),c()),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".category-pill"),o=document.querySelector(".search-input");e.forEach(c=>{c.addEventListener("click",function(){const c=this.getAttribute("data-category");t("Category pill clicked:",c),e.forEach(e=>e.classList.remove("is-active")),this.classList.add("is-active"),o&&c&&(o.value=this.textContent.trim(),o.focus()),window.dispatchEvent(new CustomEvent("emmso:category-selected",{detail:{category:c,element:this}}))})});document.querySelectorAll(".search-suggestion-chip").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const c=this.getAttribute("data-suggestion");if(t("Suggestion chip clicked:",c),o&&c){o.value=c,o.focus(),window.dispatchEvent(new CustomEvent("emmso:suggestion-selected",{detail:{suggestion:c,element:this}}));const e=o.closest("form");e&&e.submit()}})}),o&&o.addEventListener("focus",function(){t("Search input focused"),window.dispatchEvent(new CustomEvent("emmso:search-focused"))})}),window.EMMSO=window.EMMSO||{},window.EMMSO.enableDebug=function(){localStorage.setItem("emmso_debug","true"),location.reload()},window.EMMSO.disableDebug=function(){localStorage.removeItem("emmso_debug"),location.reload()},window.EMMSO.clearAllSearches=function(){localStorage.removeItem("recentSearches"),t("All searches cleared manually"),location.reload()},e?(console.log("[EMMSO] Debug mode enabled. Available commands:"),console.log("  EMMSO.disableDebug() - Turn off debug mode"),console.log("  EMMSO.clearAllSearches() - Clear all search history")):console.log("[EMMSO] Run EMMSO.enableDebug() to see detailed logs")}();