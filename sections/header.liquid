<header class="site-header">
  <div class="site-header__container container">
    {%- # Logo -%}
    <div class="site-header__logo">
      <a href="{{ routes.root_url }}" class="logo-link">
        {% if section.settings.logo %}
          {{ section.settings.logo | image_url: width: 200 | image_tag: alt: shop.name, class: 'logo-image' }}
        {% else %}
          <span class="logo-text">{{ shop.name }}</span>
        {% endif %}
      </a>
    </div>

    {%- # Search Bar (Desktop) -%}
    <div class="site-header__search hide-mobile">
      {% render 'search-bar-compact' %}
    </div>

    {%- # Language Selector -%}
    <div class="site-header__language hide-mobile">
      {% render 'language-selector' %}
    </div>

    {%- # Icons -%}
    <div class="site-header__icons">
      {%- # Search Icon (Mobile) -%}
      <button type="button" class="icon-button hide-desktop" data-mobile-search-toggle aria-label="{{ 'general.search.title' | t }}">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
      </button>

      {%- # Account -%}
      {% if shop.customer_accounts_enabled %}
        <a href="{{ routes.account_url }}" class="icon-button" aria-label="{{ 'customer.account.title' | t }}">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>
        </a>
      {% endif %}

      {%- # Cart -%}
      <a href="{{ routes.cart_url }}" class="icon-button icon-button--cart" aria-label="{{ 'general.cart.title' | t }}">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
        </svg>
        {% if cart.item_count > 0 %}
          <span class="cart-count">{{ cart.item_count }}</span>
        {% endif %}
      </a>
    </div>
  </div>

  {%- # Mobile Search (Hidden by default) -%}
  <div class="site-header__mobile-search hide-desktop" data-mobile-search>
    <div class="container">
      {% render 'search-bar-compact' %}
    </div>
  </div>
</header>

{% stylesheet %}
.site-header {
  position: sticky;
  top: 0;
  background: var(--color-surface);
  border-bottom: 1px solid var(--color-border);
  z-index: var(--z-header);
}

.site-header__container {
  display: flex;
  align-items: center;
  gap: var(--space-6);
  padding-top: var(--space-4);
  padding-bottom: var(--space-4);
  min-height: 64px;
}

/* Logo */
.site-header__logo {
  flex-shrink: 0;
}

.logo-link {
  display: block;
  text-decoration: none;
}

.logo-image {
  height: 40px;
  width: auto;
}

.logo-text {
  font-size: var(--text-xl);
  font-weight: var(--weight-bold);
  color: var(--color-text-primary);
}

/* Search */
.site-header__search {
  flex: 1;
  max-width: 600px;
}

/* Language */
.site-header__language {
  flex-shrink: 0;
}

/* Icons */
.site-header__icons {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  flex-shrink: 0;
}

.icon-button--cart {
  position: relative;
}

.cart-count {
  position: absolute;
  top: -4px;
  right: -4px;
  min-width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-primary);
  color: white;
  font-size: var(--text-xs);
  font-weight: var(--weight-bold);
  border-radius: var(--radius-full);
  padding: 0 4px;
}

/* Mobile Search */
.site-header__mobile-search {
  padding: var(--space-4) 0;
  border-top: 1px solid var(--color-border);
  display: none;
}

.site-header__mobile-search.is-visible {
  display: block;
}

/* Responsive */
@media (max-width: 1024px) {
  .site-header__search {
    max-width: 400px;
  }
}

@media (max-width: 768px) {
  .hide-mobile {
    display: none !important;
  }
  
  .site-header__container {
    gap: var(--space-4);
  }
}

@media (min-width: 769px) {
  .hide-desktop {
    display: none !important;
  }
}
{% endstylesheet %}

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image"
    }
  ]
}
{% endschema %}
