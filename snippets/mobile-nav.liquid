{%- # Mobile Bottom Navigation - Thumb-Optimized -%}
<nav class="mobile-nav" aria-label="{{ 'general.navigation.mobile' | t | default: 'Mobile navigation' }}">
  <a href="{{ routes.root_url }}" class="mobile-nav__item{% if request.page_type == 'index' %} is-active{% endif %}">
    <svg class="mobile-nav__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
      <polyline points="9 22 9 12 15 12 15 22"></polyline>
    </svg>
    <span class="mobile-nav__label">{{ 'general.navigation.home' | t | default: 'Home' }}</span>
  </a>

  <a href="{{ routes.search_url }}" class="mobile-nav__item{% if request.page_type == 'search' %} is-active{% endif %}">
    <svg class="mobile-nav__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="11" cy="11" r="8"></circle>
      <path d="m21 21-4.35-4.35"></path>
    </svg>
    <span class="mobile-nav__label">{{ 'general.search.title' | t | default: 'Search' }}</span>
  </a>

  <button type="button" class="mobile-nav__item mobile-nav__item--compare" data-comparison-toggle>
    <svg class="mobile-nav__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polyline points="3 6 5 6 21 6"></polyline>
      <path d="M17 6l0 14"></path>
      <path d="M7 6l0 14"></path>
    </svg>
    <span class="mobile-nav__label">{{ 'general.compare.title' | t | default: 'Compare' }}</span>
    <span class="mobile-nav__badge" data-comparison-count style="display: none;">0</span>
  </button>

  {% if shop.customer_accounts_enabled %}
  <a href="{{ routes.account_url }}" class="mobile-nav__item{% if request.page_type == 'customers/account' %} is-active{% endif %}">
    <svg class="mobile-nav__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
      <circle cx="12" cy="7" r="4"></circle>
    </svg>
    <span class="mobile-nav__label">{{ 'customer.account.title' | t | default: 'Account' }}</span>
  </a>
  {% endif %}

  <a href="{{ routes.cart_url }}" class="mobile-nav__item{% if request.page_type == 'cart' %} is-active{% endif %}">
    <svg class="mobile-nav__icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="9" cy="21" r="1"></circle>
      <circle cx="20" cy="21" r="1"></circle>
      <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
    </svg>
    <span class="mobile-nav__label">{{ 'general.cart.title' | t | default: 'Cart' }}</span>
    {% if cart.item_count > 0 %}
    <span class="mobile-nav__badge">{{ cart.item_count }}</span>
    {% endif %}
  </a>
</nav>

{% stylesheet %}
.mobile-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  display: none;
  background: var(--color-surface);
  border-top: 1px solid var(--color-border);
  box-shadow: var(--shadow-xl);
  z-index: var(--z-fab);
  padding-bottom: env(safe-area-inset-bottom);
}

@media (max-width: 768px) {
  .mobile-nav {
    display: flex;
  }
}

.mobile-nav__item {
  position: relative;
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: var(--space-2);
  min-height: var(--touch-target-min);
  text-decoration: none;
  color: var(--color-text-secondary);
  background: transparent;
  border: none;
  cursor: pointer;
  transition: all var(--duration-fast);
  -webkit-tap-highlight-color: transparent;
}

.mobile-nav__item:active {
  background: var(--color-background);
}

.mobile-nav__item.is-active {
  color: var(--color-primary);
}

.mobile-nav__icon {
  width: 24px;
  height: 24px;
  flex-shrink: 0;
}

.mobile-nav__label {
  font-size: var(--text-xs);
  font-weight: var(--weight-medium);
  line-height: 1;
}

.mobile-nav__badge {
  position: absolute;
  top: 6px;
  right: 20%;
  min-width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--color-primary);
  color: white;
  font-size: 10px;
  font-weight: var(--weight-bold);
  border-radius: var(--radius-full);
  padding: 0 4px;
  border: 2px solid var(--color-surface);
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .mobile-nav__item {
    transition: none;
  }
}
{% endstylesheet %}
