{% comment %}
  CSS Custom Properties (CSS Variables)
  
  Defines global design tokens used throughout the theme:
  - Typography (fonts, sizes, weights)
  - Colors (primary, secondary, backgrounds, text)
  - Spacing (consistent spacing scale)
  - Layout (page width, breakpoints)
  - Design system (borders, shadows, transitions)
  
  Usage: {% render 'css-variables' %}
{% endcomment %}

{% style %}
  {% # Loads all font variations with display: swap for better performance %}
  {{ settings.type_primary_font | font_face: font_display: 'swap' }}
  {{ settings.type_primary_font | font_modify: 'weight', 'bold' | font_face: font_display: 'swap' }}
  {{ settings.type_primary_font | font_modify: 'weight', 'bold' | font_modify: 'style', 'italic' | font_face: font_display: 'swap' }}
  {{ settings.type_primary_font | font_modify: 'style', 'italic' | font_face: font_display: 'swap' }}

  :root {
    /* ============================================
       Typography
       ============================================ */
    --font-primary-family: {{ settings.type_primary_font.family }}, {{ settings.type_primary_font.fallback_families }};
    --font-primary-style: {{ settings.type_primary_font.style }};
    --font-primary-weight: {{ settings.type_primary_font.weight }};
    
    /* Font Sizes (fluid typography) */
    --font-size-xs: 0.75rem;      /* 12px */
    --font-size-sm: 0.875rem;     /* 14px */
    --font-size-base: 1rem;       /* 16px */
    --font-size-lg: 1.125rem;     /* 18px */
    --font-size-xl: 1.25rem;      /* 20px */
    --font-size-2xl: 1.5rem;      /* 24px */
    --font-size-3xl: 2rem;        /* 32px */
    
    /* Font Weights */
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-bold: 700;
    
    /* ============================================
       Colors
       ============================================ */
    --color-primary: {{ settings.color_primary | default: '#3b82f6' }};
    --color-primary-dark: {{ settings.color_primary_dark | default: '#2563eb' }};
    --color-primary-rgb: {{ settings.color_primary | default: '#3b82f6' | color_extract: 'red' }}, {{ settings.color_primary | default: '#3b82f6' | color_extract: 'green' }}, {{ settings.color_primary | default: '#3b82f6' | color_extract: 'blue' }};
    
    --color-background: {{ settings.background_color | default: '#ffffff' }};
    --color-background-secondary: {{ settings.background_secondary | default: '#f5f5f5' }};
    
    --color-text: {{ settings.foreground_color | default: '#1a1a1a' }};
    --color-text-secondary: {{ settings.text_secondary | default: '#4a4a4a' }}; /* IMPROVED: Was #666, now darker for better contrast */
    --color-text-muted: #6b6b6b; /* ADDED: Lighter than secondary but still WCAG AA compliant */
    
    --color-border: {{ settings.border_color | default: '#e5e5e5' }};
    --color-border-strong: #b0b0b0; /* ADDED: Darker border for better visibility */
    
    --color-button-bg: {{ settings.button_background | default: '#3b82f6' }};
    --color-button-bg-hover: {{ settings.button_background_hover | default: '#2563eb' }};
    --color-button-text: {{ settings.button_text_color | default: '#ffffff' }};
    
    /* ============================================
       Spacing (consistent scale)
       ============================================ */
    --spacing-xs: 0.25rem;   /* 4px */
    --spacing-sm: 0.5rem;    /* 8px */
    --spacing-md: 1rem;      /* 16px */
    --spacing-lg: 1.5rem;    /* 24px */
    --spacing-xl: 2rem;      /* 32px */
    --spacing-2xl: 3rem;     /* 48px */
    --spacing-3xl: 4rem;     /* 64px */
    
    /* ============================================
       Layout
       ============================================ */
    --page-width: {{ settings.max_page_width | default: 1440 }}px;
    --page-margin: {{ settings.min_page_margin | default: 20 }}px;
    --header-height: 80px;
    
    /* ACCESSIBILITY: Touch Target Sizes - WCAG 2.5.5 Level AAA */
    --touch-target-min: 44px; /* Minimum for all interactive elements */
    
    /* ============================================
       Design System
       ============================================ */
    --border-radius: {{ settings.input_corner_radius | default: 8 }}px;
    --border-width: 1px;
    
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    
    --transition-fast: 150ms ease;
    --transition-base: 250ms ease;
    --transition-slow: 350ms ease;
    
    /* ============================================
       Breakpoints (for reference in CSS)
       ============================================ */
    --breakpoint-sm: 640px;
    --breakpoint-md: 768px;
    --breakpoint-lg: 990px;
    --breakpoint-xl: 1280px;
  }
  
  /* Dark mode support (optional) */
  @media (prefers-color-scheme: dark) {
    :root {
      --color-background: #1a1a1a;
      --color-background-secondary: #2a2a2a;
      --color-text: #ffffff;
      --color-text-secondary: #b3b3b3;
      --color-border: #404040;
    }
  }
{% endstyle %}
